(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n.p+"static/media/octocat.2203be16.svg"},33:function(e,t,n){e.exports=n(54)},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},47:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),s=n.n(i),o=(n(38),n(39),n(1)),c=n(2),l=n(4),u=n(3),h=n(5),m=n(7),p=n(9),d=(n(40),n(41),n(25)),f=n.n(d),y=(n(42),"/rmstats"),v="*UNK",b={RM:"RM",date:"Date",outcome:"Outcome",mentions:"Mentions",vote:"!Vote",size:"Participants",comments:"Comments"},g=50;var k={moved:"yes",notmoved:"no",nc:"nc",unknown:"unk"},E={moved:["moved","page moved","consensus to move","move","move all","moved as proposed","pages moved","done","moved as requested","moved all","moved per request"],notmoved:["not moved","consensus against","consensus not to move","consensus against move","withdrawn","withdrawn by nominator","withdrawn by nom","page not moved","no move"],nc:["no consensus","no consensus to move","no consensus at this time","no consensus for move"]},O=function(){function e(t){Object(o.a)(this,e),this.str=t,null===this.str&&(this.str="")}return Object(c.a)(e,[{key:"normalized",get:function(){return this.cleaned.toLowerCase()}},{key:"cleaned",get:function(){var e=this.str;return e=(e=(e=(e=e.replace(/\[\[([^|\]]+?)\]\]/g,"$1")).replace(/\[\[[^\]|]*\|([^\]]*)\]\]/g,"$1")).replace(/^[']+/,"").replace(/['.;:]+$/,"")).trim()}}]),e}(),_=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"outcome",get:function(){for(var e=this.normalized,t=0,n=Object.keys(E);t<n.length;t++){var a=n[t],r=!0,i=!1,s=void 0;try{for(var o,c=E[a][Symbol.iterator]();!(r=(o=c.next()).done);r=!0){if(e===o.value)return k[a]}}catch(l){i=!0,s=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}}return k.unknown}}]),t}(O),j={support:"supp",oppose:"opp",weakSupport:"weak-supp",weakOppose:"weak-opp",strongSupport:"strong-supp",strongOppose:"strong-opp",comment:"comment",neutral:"neut",unknown:"unk"},x={support:["support","support as proposed","support all"],oppose:["oppose","oppose all"],weakSupport:["weak support"],weakOppose:["weak oppose"],strongSupport:["strong support"],strongOppose:["strong oppose"],comment:["comment"],neutral:["neutral"]},w=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"vote",get:function(){for(var e=this.normalized,t=0,n=Object.keys(x);t<n.length;t++){var a=n[t],r=!0,i=!1,s=void 0;try{for(var o,c=x[a][Symbol.iterator]();!(r=(o=c.next()).done);r=!0){if(e===o.value)return j[a]}}catch(l){i=!0,s=l}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}}return j.unknown}}]),t}(O),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderCol",value:function(e){var t,n={},a=[e.replace("!","")],i=this.props.dat;switch(e){case b.RM:t=r.a.createElement("span",null,r.a.createElement("a",{href:this.rm_link},i.from_title," ","\u2192"," ",i.to_title||"?"),i.n_articles>1&&r.a.createElement("small",{className:"multimove-indicator",title:"This RM involved ".concat(i.n_articles," total renames")},"+",i.n_articles-1));break;case b.date:t=i.close_date.split(" ")[0];break;case b.outcome:var s=new _(i.outcome);t=s.cleaned,a.push("outcome-"+s.outcome);break;case b.size:t=i.n_participants-1;break;case b.mentions:t=i.n_mentions;break;case b.vote:if(a.push("role-"+i.role),"nom"===i.role)t="Nominator";else if("close"===i.role)t="Closer";else{var o=new w(i.vote);t=o.cleaned,a.push("vote-"+o.vote)}break;case b.comments:t=i.n_comments;break;default:console.error("Unrecognized RM table heading: "+e)}return"number"===typeof t&&(t=t.toLocaleString()),r.a.createElement("td",Object.assign({key:e,className:a.join(" ")},n),t)}},{key:"render",value:function(){var e=this.props.headings.map(this.renderCol.bind(this));return r.a.createElement("tr",null,e)}},{key:"rm_link",get:function(){return"https://en.wikipedia.org/wiki/"+this.props.dat.rm_link}}]),t}(r.a.Component),C=n(15),R=n(12),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg expander",onClick:this.props.onExpand},"Show More")}}]),t}(r.a.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.headings.map(function(e,t){return r.a.createElement("th",{className:e.replace("!",""),key:e},e)});return r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"wikitable"},r.a.createElement("thead",null,r.a.createElement("tr",null,e)),r.a.createElement("tbody",null,this.props.children)),this.props.expandable&&r.a.createElement(M,{onExpand:this.props.onExpand}))}}]),t}(r.a.Component),T=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).sortKeys=[],n.apiSensitiveStateVars=["n","sortKey"],n.state={rows:[],n:g,sortKey:n.defaultSortKey};var a=!0,r=!1,i=void 0;try{for(var s,c=n.checkboxes[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var h=s.value;n.state[h.statevar]=h.initialValue,h.apiInsensitive||n.apiSensitiveStateVars.push(h.statevar)}}catch(m){r=!0,i=m}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return n.onExpand=n.onExpand.bind(Object(R.a)(n)),n.handleSortChange=n.handleSortChange.bind(Object(R.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onExpand",value:function(){this.setState(function(e){return{n:e.n+50}})}},{key:"handleSortChange",value:function(e){this.setState({sortKey:e.target.value})}},{key:"componentDidMount",value:function(){this.updateRowFetch()}},{key:"shouldRefetchRows",value:function(e,t){var n=this;return this.apiSensitiveStateVars.some(function(e){return function(e){return n.state[e]!==t[e]}(e)})}},{key:"componentDidUpdate",value:function(e,t){this.shouldRefetchRows(e,t)&&this.updateRowFetch()}},{key:"updateRowFetch",value:function(){var e=this;this.rows_api_call().then(function(t){e.setState({rows:t})})}},{key:"renderRow",value:function(){console.error("Abstract method not implemented.")}},{key:"renderControls",value:function(){return r.a.createElement("form",null,this.renderSortControls(),this.renderCheckboxes())}},{key:"renderCheckboxes",value:function(){var e=this;if(0!==this.checkboxes.length){var t=this.checkboxes.map(function(t){var n=t.statevar,a=t.label;return r.a.createElement("div",{key:n,className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:n,id:"cb-"+n,checked:e.state[n],onChange:function(t){e.setState(Object(C.a)({},n,t.target.checked))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cb-"+n},a))});return r.a.createElement(r.a.Fragment,null,t)}}},{key:"renderSortControls",value:function(){var e=this;if(0!==this.sortKeys.length){var t=this.sortKeys.map(function(t){var n=t.key,a=t.label,i=t.title;return r.a.createElement("div",{key:n,className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:n,id:"sortradio-"+n,checked:e.state.sortKey===n,onChange:e.handleSortChange}),r.a.createElement("label",{className:"form-check-label",htmlFor:"sortradio-"+n,title:i},a))});return r.a.createElement(r.a.Fragment,null,t)}}},{key:"renderTable",value:function(){var e=this,t=this.state.rows.map(function(t){return e.renderRow(t)});return r.a.createElement(r.a.Fragment,null,this.renderControls(),r.a.createElement(N,{headings:this.headings,onExpand:this.onExpand,expandable:this.state.rows.length===this.state.n},t))}},{key:"render",value:function(){return this.renderTable()}},{key:"checkboxes",get:function(){return[]}},{key:"defaultSortKey",get:function(){}}]),t}(r.a.Component),K=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).base_headings=[b.RM,b.date,b.outcome,b.size],n.extra_headings=[],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderRow",value:function(e){if((t=e).from_title!==v&&null!==t.outcome){var t,n=e.rm_id+(e.role?e.role:"");return r.a.createElement(S,{key:n,headings:this.headings,dat:e})}}},{key:"headings",get:function(){return this.base_headings.concat(this.extra_headings)}}]),t}(T);function F(e,t){var n=Object.fromEntries(Object.entries(t).map(function(e){var t=e[0],n=e[1];return[t,"boolean"===typeof n?n?"1":"0":n]})),a=new URLSearchParams(n).toString();return e+(a&&"?")+a}function D(e,t){e.startsWith("/")||(e="/"+e);var n=F(window.location.origin+y+"/api"+e,t);return window.fetch(n,{headers:{Accept:"application/json"}}).then(function(e){return e.json()})}function L(e){return e.replace(/ /g,"_")}function A(e){return e.replace(/_/g," ")}function P(e){return e.replace(/ /g,"_")}function q(e){return"/users/"+P(e)}function I(e){return r.a.createElement(m.b,{to:"/policies/"+e},e)}function U(e){return"https://en.wikipedia.org/wiki/"+L(e)}function W(e){var t=L(e),n=A(e),a="https://en.wikipedia.org/wiki/"+t;return r.a.createElement("a",{href:a},n)}var z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).extra_headings=[b.mentions],n.sortKeys=[{label:"Recent",key:"recent"},{label:"Popular",key:"big"},{label:"Mentions",key:"mentions",title:"Sort by number of mentions of this policy"},{label:"Relevance",key:"relevance",title:"Sort by mentions, normalized by number of comments"}],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return e=this.polname,t=this.state.n,n=this.state.sortKey,D("policy/"+e,{n:t,sort:n});var e,t,n}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"RM discussions invoking ",function(e){var t="https://en.wikipedia.org/wiki/"+e;return r.a.createElement("a",{href:t},e)}(this.polname)),this.renderTable())}},{key:"defaultSortKey",get:function(){return"recent"}},{key:"polname",get:function(){return this.props.match.params.pol}}]),t}(K),B=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render_expansion",value:function(){if(null===this.props.dat.expanded)return r.a.createElement("a",{href:this.pol_link,className:"redlink"},this.props.dat.pol);var e=this.props.dat.expanded.replace(/^Wikipedia:/,"");return r.a.createElement("a",{href:this.pol_link},e)}},{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",{className:"Shortcut"},I(this.pol)),r.a.createElement("td",null,this.props.dat.n.toLocaleString()),r.a.createElement("td",{className:"Policy"},this.render_expansion()))}},{key:"pol",get:function(){var e=this.props.dat;return e.pol||e.canon}},{key:"pol_link",get:function(){return"https://en.wikipedia.org/wiki/"+this.pol}}]),t}(r.a.Component),V=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).headings=["Shortcut","Mentions","Policy"],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return e=this.state.n,t=this.state.collapse,D("policies",{n:e,collapse:t});var e,t}},{key:"renderRow",value:function(e){return r.a.createElement(B,{key:e.pol||e.canon,dat:e})}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"Most cited policy shortcuts"),this.renderTable())}},{key:"checkboxes",get:function(){return[{statevar:"collapse",label:"Combine aliases",initialValue:!0}]}}]),t}(T),J=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).doSearch=n.doSearch.bind(Object(R.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"doSearch",value:function(e){e.preventDefault();var t={q:document.getElementById("searchField").value};!0===document.getElementById("caseSensitiveBox").checked&&(t.case="1");var n=F("/rms/search",t);this.props.history.push(n)}},{key:"render",value:function(){return r.a.createElement("form",{className:"searchform"},r.a.createElement("input",{id:"searchField",type:"search",defaultValue:this.props.query}),r.a.createElement("button",{className:"btn-search",onClick:this.doSearch},"Search"),r.a.createElement("label",null,r.a.createElement("input",{id:"caseSensitiveBox",type:"checkbox",checked:!0===this.props.case_sensitive,onChange:this.doSearch}),"Case-sensitive"))}}]),t}(r.a.Component),Y=Object(p.e)(J),$=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sortKeys=[{key:"big",label:"Popular",title:"RMs with most comments"},{key:"recent",label:"Recent"},{key:"random",label:"Random"}],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return e=this.state.sortKey,D("rms",{n:this.state.n,sort:e});var e}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"RMs"),r.a.createElement(Y,null),this.renderTable())}},{key:"defaultSortKey",get:function(){return"recent"}},{key:"headings",get:function(){var e=this.base_headings;return"big"===this.state.sortKey&&(e=e.concat([b.comments])),e}}]),t}(K),H=n(32),G=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"updateRowFetch",value:function(){var e,t,n,a=this;this.query?(e=this.query,t=this.state.n,n=this.case_sensitive,D("rms/search",{n:t,query:e,case:n})).then(function(e){a.setState({rows:e})}):this.setState({rows:[]})}},{key:"shouldRefetchRows",value:function(e,n){return e.location.search!==this.props.location.search||Object(H.a)(Object(u.a)(t.prototype),"shouldRefetchRows",this).call(this,e,n)}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"RM Search"),r.a.createElement(Y,{query:this.query,case_sensitive:this.case_sensitive}),this.renderTable())}},{key:"qStringParams",get:function(){return new URLSearchParams(this.props.location.search)}},{key:"query",get:function(){return this.qStringParams.get("q")}},{key:"case_sensitive",get:function(){return"1"===this.qStringParams.get("case")}}]),t}(K),X=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"searchform"},r.a.createElement("input",{id:"userlookup",type:"search"}),r.a.createElement("button",{className:"btn-search",onClick:function(t){t.preventDefault();var n=document.getElementById("userlookup").value;e.props.history.push(q(n))}},"User lookup"))}}]),t}(r.a.Component),Q=Object(p.e)(X),Z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).headings=["User","!Votes","Nominations","Closes","Total"],n.sortKeys=[{key:"votes",label:"!Votes"},{key:"noms",label:"Nominations"},{key:"closes",label:"Closes"},{key:"all",label:"All"}],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return e=this.state.sortKey,t=this.state.n,D("users/top",{sort:e,n:t});var e,t}},{key:"renderRow",value:function(e){return r.a.createElement("tr",{key:e.user},r.a.createElement("td",null,(t=e.user,r.a.createElement(m.b,{to:q(t)},t))),r.a.createElement("td",null,e.votes.toLocaleString()),r.a.createElement("td",null,e.noms.toLocaleString()),r.a.createElement("td",null,e.closes.toLocaleString()),r.a.createElement("td",null,e.all.toLocaleString()));var t}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"Users"),r.a.createElement(Q,null),r.a.createElement("h2",null,"Most active users"),this.renderTable())}},{key:"defaultSortKey",get:function(){return"all"}}]),t}(T),ee=(n(47),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={expanded:!1},n.limit=15,n.collapse=n.collapse.bind(Object(R.a)(n)),n.expand=n.expand.bind(Object(R.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"collapse",value:function(){this.setState({expanded:!1})}},{key:"expand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=Object.entries(this.props.counts).sort(function(e,t){return t[1]-e[1]}).map(function(e){var t=e[0],n=e[1];return r.a.createElement("li",{key:t},I(t),"\xd7",n)}),t="",n="btn btn-primary btn-sm polcount-resizer";return this.state.expanded?t=r.a.createElement("button",{className:n,onClick:this.collapse,title:"Less"},"-"):this.limit<Object.keys(this.props.counts).length&&(e=e.slice(0,this.limit),t=r.a.createElement("button",{className:n,onClick:this.expand,title:"More"},"+")),r.a.createElement("div",null,r.a.createElement("ul",{className:"horiz"},e,t))}}]),t}(r.a.Component)),te=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sortKeys=[{key:"close",label:"Closed"},{key:"nom",label:"Nominated"},{key:"vote",label:"Participated"},{key:"all",label:"All"}],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return e=this.props.username,t=this.state.n,n=this.state.sortKey,D("user/rms",{user:e,n:t,role:n});var e,t,n}},{key:"headings",get:function(){var e=[];return"vote"===this.state.sortKey|"all"===this.state.sortKey&&(e=[b.vote]),this.base_headings.concat(e)}},{key:"defaultSortKey",get:function(){return"all"}}]),t}(K),ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={activity:{},polcounts:{},loaded:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"fetchStats",value:function(){var e,t=this;(e=this.username,D("user/stats",{user:e})).then(function(e){t.setState({activity:e.activity,polcounts:e.polcounts,loaded:!0})})}},{key:"componentDidMount",value:function(){this.fetchStats()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.username!==e.match.params.username&&(this.setState({loaded:!1}),this.fetchStats())}},{key:"render",value:function(){return this.state.loaded?this.state.loaded&&0===this.state.activity.all?this.render_nouser():this.render_extant():r.a.createElement("h1",null,"RM stats for user ",this.username)}},{key:"render_nouser",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"User ",this.username," not found"),r.a.createElement(Q,null))}},{key:"render_extant",value:function(){var e=this.state.activity;return r.a.createElement("section",null,r.a.createElement("h1",null,"RM stats for user ",this.username),r.a.createElement("p",null,this.username," has participated in ",e.all," RMs:"),r.a.createElement("ul",null,r.a.createElement("li",null,e.noms.toLocaleString()," nominations"),r.a.createElement("li",null,e.closes.toLocaleString()," closes"),r.a.createElement("li",null,e.votes.toLocaleString()," comments/!votes")),r.a.createElement("p",null,"Their most cited policies are:"),r.a.createElement(ee,{counts:this.state.polcounts}),r.a.createElement("h2",null,"Recent RMs"),r.a.createElement(te,{username:this.username}))}},{key:"username",get:function(){return this.props.match.params.username.replace(/_/g," ")}}]),t}(r.a.Component),ae=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).headings=["Article","RMs","Comments","Wiki links"],n.sortKeys=[{key:"rms",label:"RMs"},{key:"comments",label:"Comments"}],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return D("articles",{sort:this.state.sortKey,n:this.state.n})}},{key:"renderRow",value:function(e){return r.a.createElement(re,{key:e.article,dat:e})}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"Articles"),this.renderTable())}},{key:"defaultSortKey",get:function(){return"rms"}}]),t}(T),re=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.dat;return r.a.createElement("tr",{key:e.article},r.a.createElement("td",null,function(e){var t=L(e);return r.a.createElement(m.b,{to:"/articles/"+t},e)}(e.article)),r.a.createElement("td",null,e.rms.toLocaleString()),r.a.createElement("td",null,e.comments.toLocaleString()),r.a.createElement("td",null,r.a.createElement("a",{href:U(e.article)},e.article),r.a.createElement("a",{href:U("Talk:"+e.article)}," (talk)")))}}]),t}(r.a.Component),ie=ae,se=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sortKeys=[{label:"Recent",key:"recent"},{label:"Popular",key:"big"}],n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"rows_api_call",value:function(){return D("/articles/"+this.article,{n:this.state.n,sort:this.state.sortKey})}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"RM discussions involving ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/"+this.article},this.articleDecoded)),this.renderTable())}},{key:"defaultSortKey",get:function(){return"recent"}},{key:"article",get:function(){return this.props.match.params.article}},{key:"articleDecoded",get:function(){return A(this.article)}}]),t}(K),oe=[{heading:"What?",content:r.a.createElement("p",null,"A little web app for visualizing statistics related to ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Wikipedia:Requested_moves"},"requested moves")," (RMs) on Wikipedia - i.e. formal discussions about renaming articles.")},{heading:"Why?",content:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"For fun! Though I also hope it might be a useful research tool to help inform ongoing move discussions. For example:"),r.a.createElement("ul",null,r.a.createElement("li",null,'Suppose there\'s a move discussion between a title of the form "X Y" and "X Y controversy". It could be helpful to browse ',r.a.createElement(m.b,{to:"/rms/search?q=controversy"},'past RMs involving titles with the word "controversy"')," to see the arguments that were made there."),r.a.createElement("li",null,'In an RM that argues that "List of Presidents of Fooland" should be changed to "List of presidents of Fooland" per ',r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/MOS:JOBTITLES"},"MOS:JOBTITLES"),", it could be useful to see how ",r.a.createElement(m.b,{to:"/policies/MOS:JOBTITLES"},"that policy has been interpreted in previous RMs"),".")),r.a.createElement("p",null,"This tool drew some inspiration from ",r.a.createElement("a",{href:"https://tools.wmflabs.org/afdstats/"},"AfD Stats"),", though it doesn't have the same focus on measuring the 'accuracy' of individual users, in terms of matching consensus. (This would be harder to do for move discussions, because, compared to deletion discussions, there's a greater diversity of possible outcomes, and possible !votes.)"))},{heading:"Who?",content:r.a.createElement("p",null,"This tool was written by Colin Morris, aka ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/User:Colin_M"},"User:Colin M")," on Wikipedia. If you have feedback, feel free to leave me a note on ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/User_talk:Colin_M"},"my talk page"),".")},{heading:"How?",content:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The RM data was scraped via the MediaWiki API, and parsed using some kludgy heuristics implemented in Python. The scraping/parsing code is ",r.a.createElement("a",{href:"https://github.com/PLACEHOLDER"},"on GitHub here"),". You may find that some RMs are missing, or have incorrect values for some fields. This is hard to avoid, given the huge variety of formatting and template usage in RMs through the ages. Even finding where one user's comment ends and a new one begins is extremely non-trivial!"),r.a.createElement("p",null,"So far only one scrape has been performed (around 2019-07-21), and the site will not be updated automatically with new RMs. If there's enough interest, I might try setting up some automation to rescrape periodically."),r.a.createElement("p",null,"This site is coded with React, with an API written in Flask. The code is ",r.a.createElement("a",{href:"https://github.com/colinmorris/rm_stats"},"on GitHub here"),". Pull requests to either repository are extremely welcome!"))},{heading:"Whence?",content:r.a.createElement("p",null,"Did you really just say ",r.a.createElement("i",null,"whence"),"?")}],ce=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderSection",value:function(e){return r.a.createElement("section",{key:e.heading},r.a.createElement("h2",null,e.heading),e.content)}},{key:"render",value:function(){var e=oe.map(this.renderSection);return r.a.createElement(r.a.Fragment,null,e)}}]),t}(r.a.Component),le=n(28),ue=n.n(le),he=n(29),me=n.n(he),pe=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render_to_title",value:function(){var e,t=this,n=this.props.evt.to_title;return null===n?r.a.createElement("tspan",{dy:"1.1em"},"?"):(e=20,n.replace(new RegExp("(?![^\\n]{1,".concat(e,"}$)([^\\n]{1,").concat(e,"})\\s"),"g"),"$1\n")).split("\n").map(function(e){return r.a.createElement("tspan",{x:t.props.cx,dy:"1.1em",key:e},e)})}},{key:"points_in_circle",value:function(e){for(var t=[],n=0;t.length<e&&n<1e3;){var a=2*(this.pseudo()-.5)*this.props.r,r=2*(this.pseudo()-.5)*this.props.r;Math.pow(Math.pow(a,2)+Math.pow(r,2),.5)<this.props.r&&t.push({x:this.props.cx+a,y:this.props.cy+r}),n+=1}return t}},{key:"pseudo",value:function(){var e=1e4*Math.sin(this.seed++);return e-Math.floor(e)}},{key:"render_votes",value:function(){var e=this.props.evt.votes;if(void 0!==e){this.seed=e.other+17*e.supp+31*e.opp;for(var t=this.points_in_circle(e.other+e.supp+e.opp),n=[],a=0;a<t.length;a++){var i=a<e.other?"other":a<e.other+e.supp?"supp":"opp",s=t[a];n.push(r.a.createElement("circle",{key:a,className:"vote "+i,cx:s.x,cy:s.y}))}return n}console.warn("votes was undefined")}},{key:"render",value:function(){return r.a.createElement("g",{onPointerEnter:this.props.onEnter,className:"Event"},r.a.createElement("circle",{className:"Event-node",cx:this.props.cx,cy:this.props.cy,r:this.props.r,stroke:this.props.title_color,fill:"white"}),this.render_votes(),r.a.createElement("text",{x:this.props.cx,y:this.props.cy+this.props.r+0,style:{fontSize:"9px"}},this.render_to_title()))}}]),t}(r.a.Component),de=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("g",{className:"Tick"},r.a.createElement("text",{x:this.props.x,y:this.props.y},this.props.label),r.a.createElement("line",{x1:this.props.x,x2:this.props.x,y1:this.props.y-10,y2:this.props.y+10}))}}]),t}(r.a.Component),fe=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render_line",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gray";return r.a.createElement("line",Object.assign({},e,{stroke:t}))}},{key:"render_ticks",value:function(){var e=this.props.src_event.closedate,t=this.props.dest_event.closedate;if(void 0!==e&&void 0!==t){for(var n=t-e,a=[],i=e.getFullYear()+1;i<=t.getFullYear();i++){var s=(new Date(i,0)-e)/n;a.push(r.a.createElement(de,Object.assign({key:i,label:i},this.xy_for_frac(s))))}return a}console.warn(e)}},{key:"xy_for_frac",value:function(e){if(!this.hingey)return{x:this.props.coords.x1+(this.props.coords.x2-this.props.coords.x1)*e,y:this.props.coords.y1};var t=this.props.coords,n=[t.top_hinge.x-t.x1,t.bottom_hinge.y-t.top_hinge.y,t.x2-t.bottom_hinge.x],a=n.map(Math.abs),r=a[0],i=a[1],s=r+i+a[2],o=r/s,c=(r+i)/s,l=a.map(function(e){return e/s});if(e<o){var u=e/l[0];return{x:t.x1+n[0]*u,y:t.y1}}if(e<c){var h=(e-o)/l[1];return{x:t.top_hinge.x,y:t.top_hinge.y+n[1]*h}}var m=(e-c)/l[2];return{x:t.bottom_hinge.x+n[2]*m,y:t.y2}}},{key:"render_hinge",value:function(){var e=this.props.coords,t=e.top_hinge,n=e.bottom_hinge;return[this.render_line({x1:e.x1,y1:e.y1,x2:t.x,y2:t.y,key:"top"},this.props.title_color),this.render_line({key:"desc",x1:t.x,y1:t.y,x2:n.x,y2:n.y},this.props.title_color),this.render_line({key:"bot",x1:n.x,y1:n.y,x2:e.x2,y2:e.y2},this.props.title_color)]}},{key:"render",value:function(){var e;return e=this.props.coords.top_hinge?this.render_hinge():this.render_line(this.props.coords,this.props.title_color),r.a.createElement("g",{className:"Connector"},e,this.render_ticks())}},{key:"hingey",get:function(){return this.props.coords.top_hinge}}]),t}(r.a.Component),ye=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render_date",value:function(e){return e.toLocaleDateString()}},{key:"render_creation",value:function(){return r.a.createElement(r.a.Fragment,null,"Article ",W(this.props.event.to_title)," created on ",this.render_date(this.props.event.closedate),".")}},{key:"render_rm",value:function(){var e=this.props.event;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"On ",this.render_date(e.closedate)," it was proposed that ",r.a.createElement("b",null,e.from_title)," be moved to ",r.a.createElement("b",null,e.to_title),"."),r.a.createElement("p",null,r.a.createElement("b",null,e.votes.supp)," users supported the move, ",r.a.createElement("b",null,e.votes.opp)," users opposed. The closing outcome was: ",r.a.createElement("b",null,e.outcome)),r.a.createElement("p",null,"Link: ",W(e.rm_link)),r.a.createElement("p",{className:"debug"},r.a.createElement("b",null,"DEBUG:"),JSON.stringify(e)))}},{key:"render",value:function(){return this.props.event?r.a.createElement("div",{className:"viewport"},"creation"===this.props.event.type?this.render_creation():this.render_rm()):null}}]),t}(r.a.Component),ve=function(){function e(){Object(o.a)(this,e),this.x=this.xmargin,this.y=this.ymargin+this.base_radius,this.dir=1}return Object(c.a)(e,[{key:"alloc_event",value:function(e,t){var n=t?this.max_radius:this.base_radius,a={cx:this.x+n*this.dir,cy:this.y,r:n};return this.x+=2*n*this.dir,a}},{key:"alloc_connector",value:function(e){var t=this.xscale_event_interval(e);if(this.has_room_to_grow(this.x+t*this.dir)){var n={x1:this.x-this.base_radius*this.dir,y1:this.y,x2:this.x+t*this.dir+this.base_radius*this.dir,y2:this.y};return this.x+=t*this.dir,n}return this.alloc_hinge(t)}},{key:"alloc_hinge",value:function(e){var t=e,n=e-this.lineheight-this.hinge_minhandle;n<this.hinge_minhandle&&(console.warn("Extending total hinge length from ".concat(e," to ").concat(this.min_hingelength)),n=this.hinge_minhandle,t=this.min_hingelength);var a=this.xroom;n>a&&(n=a);var r=t-(n+this.lineheight),i=this.x+n*this.dir,s=this.y+this.lineheight,o=i-r*this.dir,c={x1:this.x-this.base_radius*this.dir,y1:this.y,top_hinge:{x:i,y:this.y},bottom_hinge:{x:i,y:s},x2:o-this.base_radius*this.dir,y2:s};return this.y=s,this.x=o,this.dir*=-1,c}},{key:"has_room_to_grow",value:function(e){return 1===this.dir?e+2*this.max_radius<=this.width-this.xmargin:e-2*this.max_radius>=this.xmin}},{key:"xscale_event_interval",value:function(e){return 1.2*e}},{key:"hinge_minhandle",get:function(){return 10}},{key:"min_hingelength",get:function(){return this.lineheight+2*this.hinge_minhandle}},{key:"xroom",get:function(){return 1===this.dir?this.xmax-this.x:this.x-this.xmin}},{key:"xmax",get:function(){return this.width-this.xmargin}},{key:"xmin",get:function(){return this.xmargin}},{key:"width",get:function(){return.8*window.innerWidth}},{key:"height",get:function(){return this.y+this.max_radius+this.ymargin+this.line_ymargin}},{key:"line_ymargin",get:function(){return 30}},{key:"lineheight",get:function(){return 2*this.max_radius+this.line_ymargin}},{key:"xmargin",get:function(){return 10}},{key:"ymargin",get:function(){return 10}},{key:"base_radius",get:function(){return 30}},{key:"max_radius",get:function(){return 1.33*this.base_radius}}]),e}(),be=n(31),ge=n(30);function ke(e){var t=e.map(function(e){return Object(ge.a)({closedate:new Date(e.close_date)},e)}),n={type:"creation",to_title:t[0].from_title,closedate:new Date(t[0].closedate.valueOf()-5184e6)};return t.splice(0,0,n),new Oe(t)}var Ee,Oe=function(){function e(t){Object(o.a)(this,e),this.events=t}return Object(c.a)(e,[{key:"days_after_evt",value:function(e){if(e>=this.events.length-1)return 0;var t=this.events[e].closedate;return(this.events[e+1].closedate-t)/864e5}},{key:"title_as_of",value:function(e){for(var t,n=e;n>=0;n--)if("creation"===(t=this.events[n]).type||!0===t.moved)return t.to_title;console.error("Found no current title start from idx="+e)}},{key:"all_titles",get:function(){var e=this.events.map(function(e){return e.to_title});return Object(be.a)(new Set(e))}}]),e}();function _e(e){var t=1e4*Math.sin(e);return t-Math.floor(t)}function je(e,t){return t[function(e,t){var n=_e(e);return Math.floor(n*t)}(e,t.length)]}Ee=function(e){for(var t=["Chairman","Chairperson","Chair (official)","Chair (officer)","Chairman","Chairperson","Chair (position)","Chair (presiding officer)"],n=je(-1,t),a=[{type:"creation",to_title:n}],r=0;r<e;r++){var i=je(r,t),s=_e(r)>.5;a.push({type:"rm",from_title:n,to_title:i,moved:s}),s&&(n=i)}return a}(15);var xe=new Oe(Ee),we=(n(53),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={focused:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"xscale_event_interval",value:function(e){return.5*e}},{key:"focus",value:function(e){this.setState({focused:e})}},{key:"render",value:function(){var e=this,t=new ve,n=this.props.timeline,a=this.cmap,i=[],s=[];return this.events.forEach(function(o,c){var l=e.state.focused===o,u=t.alloc_event(o,l);if(i.push(r.a.createElement(pe,Object.assign({key:"evt-"+c,evt:o,onEnter:function(){return e.focus(o)},title_color:a.get(o.to_title)},u))),c!==e.events.length-1){var h=t.alloc_connector(n.days_after_evt(c));s.push(r.a.createElement(fe,{key:"connector-"+c,src_event:o,dest_event:e.events[c+1],title_color:a.get(n.title_as_of(c)),coords:h}))}}),r.a.createElement("div",{className:"Timeline"},r.a.createElement("svg",{className:"Timeline",width:t.width,height:t.height},s,i),r.a.createElement(ye,{event:this.state.focused}))}},{key:"cmap",get:function(){var e=this.props.timeline.all_titles,t=ue()("mpn65",e.length).map(function(e){return me()("#"+e).lighten(.6).desaturate(.3)}),n=e.map(function(e,n){return[e,t[n]]});return new Map(n)}},{key:"events",get:function(){return this.props.timeline.events}},{key:"width",get:function(){return 600}},{key:"height",get:function(){return 300}},{key:"max_radius",get:function(){return this.base_radius}},{key:"xmargin",get:function(){return 10}},{key:"ymargin",get:function(){return 10}},{key:"base_radius",get:function(){return 50}}]),t}(r.a.Component));we.defaultProps={timeline:xe};var Se=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={timeline:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.ix!==e.match.params.ix&&this.fetchData()}},{key:"fetchData",value:function(){var e=this;D("timeline/"+this.timeline_ix,{}).then(function(t){var n=ke(t);e.setState({timeline:n})})}},{key:"render",value:function(){return null===this.state.timeline?r.a.createElement("p",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{timeline:this.state.timeline}),r.a.createElement("p",{className:"prevnext"},this.timeline_ix>1&&r.a.createElement(m.b,{to:"/timeline/"+(this.timeline_ix-1)},"Previous"),r.a.createElement(m.b,{to:"/timeline/"+(this.timeline_ix+1)},"Next")))}},{key:"timeline_ix",get:function(){return parseInt(this.props.match.params.ix)}}]),t}(r.a.Component),Ce={small:["Yogurt","Deadmau5","Compact disc","Star Trek Into Darkness"]},Re=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).articles=Ce[e.match.params.group],n.state={loading:n.articles.length,timelines:new Array(n.articles.length)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.articles.forEach(function(t,n){D("timeline/"+L(t),{}).then(function(t){e.setState(function(e,a){var r=e.timelines.slice();return r[n]=ke(t),{timelines:r,loading:e.loading-1}})})})}},{key:"render",value:function(){var e=this;if(this.state.loading>0)return null;var t=this.state.timelines.map(function(t,n){return r.a.createElement("div",{key:e.articles[n]},r.a.createElement("h2",null,e.articles[n]),r.a.createElement(we,{timeline:t}))});return r.a.createElement(r.a.Fragment,null,t)}}]),t}(r.a.Component),Me=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/rms",className:"nav-link"},"RMs")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/users",className:"nav-link"},"Users")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/policies",className:"nav-link"},"Policies")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/articles",className:"nav-link"},"Articles")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.b,{to:"/about",className:"nav-link"},"About"))),r.a.createElement("a",{title:"rm_stats project on GitHub",className:"octo",href:"https://github.com/colinmorris/rm_stats",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"octocat",src:f.a}),r.a.createElement("span",null,"/rm_stats")))}}]),t}(r.a.Component);var Ne=function(){return r.a.createElement(m.a,{basename:y},r.a.createElement(Me,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(p.a,{exact:!0,path:"/",component:$}),r.a.createElement(p.a,{path:"/policies/:pol",component:z}),r.a.createElement(p.a,{exact:!0,path:"/policies",component:V}),r.a.createElement(p.a,{exact:!0,path:"/rms",component:$}),r.a.createElement(p.a,{path:"/rms/search",component:G}),r.a.createElement(p.a,{exact:!0,path:"/users",component:Z}),r.a.createElement(p.a,{path:"/users/:username",component:ne}),r.a.createElement(p.a,{exact:!0,path:"/articles",component:ie}),r.a.createElement(p.a,{path:"/articles/:article",component:se}),r.a.createElement(p.a,{path:"/about",component:ce}),r.a.createElement(p.a,{exact:!0,path:"/timeline",component:we}),r.a.createElement(p.a,{path:"/timeline/:ix",component:Se}),r.a.createElement(p.a,{path:"/timelines/:group",component:Re})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.56bc5f9b.chunk.js.map